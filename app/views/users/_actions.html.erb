<ul>
  <% if user_signed_in? %>
    <% if current_user == user %>
      <li>
        <%= link_to t('nlt.user_edit_profile'),
                    user_edit_path(user),
                    class: 'world_link' %>
      </li>
    <% elsif blocking %>
      <li>
        <%= link_to blocking, method: :delete, class: 'world_link' do %>
          <%= t('nlt.profile_actions.blocking.delete', username: user.username) %>

          <%= image_tag "unblock.png" %>
        <% end %>
      </li>
    <% else %>
      <li>
        <%= link_to blockings_path(blocked_id: user.id),
                    data: { confirm: t('nlt.profile_actions.blocking.confirm', username: user.username) },
                    method: :post,
                    class: 'world_link' do %>
          <%= t('nlt.profile_actions.blocking.add', username: user.username) %>

          <%= image_tag "block.png" %>
        <% end %>
      </li>

      <li>
        <%= link_to new_conversation_path(recipient_id: user.id),
                    class: "world_link" do %>
          <%= t('nlt.send_a_message_to') %> <%= user.username %>
          <%= image_tag "email_send.png" %>
        <% end %>
      </li>

      <li>
        <% friendship = current_user.friend?(user) %>

        <% if friendship %>
          <%= link_to friendship, class: 'world_link', method: :delete do %>
            <%= t('nlt.profile_actions.friend.delete', username: user.username) %>

            <%= image_tag "friend_delete.png" %>
          <% end %>
        <% else %>
          <%= link_to friendships_path(friend_id: user.id),
                      class: 'world_link',
                      method: :post do %>
            <%= t('nlt.profile_actions.friend.add', username: user.username) %>

            <%= image_tag "friend_add.png" %>
          <% end %>
        <% end %>
      </li>
    <% end %>
  <% end %>

  <% if policy(:admin).lock? %>
    <li>
      <% if user.locked? %>
        <%= link_to unlock_user_path(user.id),
                    data: {confirm: "¿Estás seguro que quieres desbloquear a este usuario? Podrá volver iniciar sesión."},
                    class: 'world_link' do %>
          <%= t('nlt.admin.unlock_user') %>
          <%= image_tag "add.png" %>
        <% end %>
      <% else %>
        <%= link_to lock_user_path(user.id),
                    data: {confirm: "¿Estás seguro que quieres bloquear a este usuario? No podrá iniciar sesión."},
                    class: 'world_link' do %>
          <%= t('nlt.admin.lock_user') %>
          <%= image_tag "remove.png" %>
        <% end %>
      <% end %>
    </li>
  <% end %>

  <% if policy(:admin).become? %>
    <li>
      <%= link_to t('nlt.admin.become_user'),
                  become_user_path(user.id),
                  class: 'world_link' %>
    </li>
  <% end %>
</ul>
